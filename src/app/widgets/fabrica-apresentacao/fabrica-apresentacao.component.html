<p-confirm-popup></p-confirm-popup>
<div class="d-flex flex-column">
    <div class="d-flex justify-content-between">
        <div class="d-flex flex-column">
            <h1 class="display-6">
                Fábrica
                @if(fabrica(); as fabrica){
                <span [class]="
                fabrica.principal?
                'text-success' : 'text-info'">
                    {{fabrica.principal ? 'Principal' : 'Privada'}}
                </span>
                }
                @else {
                <span>
                    <p-skeleton width="4rem" class="d-inline-block" />
                </span>
                }
            </h1>
            <p class="small fst-italic">~ gerada por
                @if(fabrica(); as fabrica) {
                <span class="text-success">{{ fabrica.autor }}</span>
                } @else {
                <span>
                    <p-skeleton width="4rem" class="d-inline-block" />
                </span>
                }
            </p>
        </div>
        <span class="text-muted small">
            @if(fabrica()) {
            {{ fabrica()!.date | date : 'dd/MM/yyyy HH:mm' : 'UTC' }}
            }
            @else{
            <p-skeleton width="10rem" class="mb-2" borderRadius="16px" />
            }
        </span>
    </div>
    <div class="d-flex justify-content-between align-items-center">
        <div class="d-flex gap-2">
            @if (!fabrica()) {
            <p-skeleton width="10rem" class="mb-2" borderRadius="16px" />
            }
            @else if(fabrica()!.principal){
            <button [disabled]="fabrica() && !fabrica()!.principal" (click)="confirmacaoFork($event)"
                class="btn btn-group btn-outline-success border-0 d-flex gap-2 align-items-center">
                <i tooltipPosition="bottom" [tooltipDisabled]="!(fabrica() && fabrica()!.principal)"
                    [pTooltip]="fabrica() && fabrica()!.principal? 'editar fábrica': ''"
                    [class]="fabrica() && fabrica()!.principal? 'pi pi-file-edit': 'pi pi-lock'"></i>
            </button>
            }
            @else if (!fabrica()!.principal) {
            <button (click)="confirmacaoPullRequest($event)"
                class="btn btn-group btn-outline-success border-0 d-flex gap-2 align-items-center">
                <i class="pi pi-link"></i>
            </button>
            <button (click)="confirmarRestartFabrica($event)"
                class="btn btn-group btn-outline-success border-0 d-flex gap-2 align-items-center">
                <i class="pi pi-refresh"></i>
            </button>
            <button (click)="confirmacaoDelecao($event)"
                class="btn btn-group btn-outline-danger border-0 d-flex gap-2 align-items-center">
                <i class="pi pi-trash"></i>
            </button>
            }
        </div>
        @if(fabrica()) {
        <span class="small text-secondary">{{fabrica()!.fabricaId}}</span>
        }
        @else{
        <p-skeleton width="10rem" class="mb-2" borderRadius="16px" />
        }
    </div>
</div>